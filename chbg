#!/bin/bash
SRCDIR=$HOME/img/walls

setbg() {
    if [[ -e "$1" ]]; then
        SRC="$(readlink -f "$1")"
    elif [[ -e "$SRCDIR/$1" ]]; then
        SRC="$SRCDIR/$1"
    else
        if [[ ! $quiet ]]; then
            echo -e "\e[1;31merror:\e[0m no such wallpaper: $1"
        fi
        exit
    fi
}

if [[ "$1" = "-" ]]; then
    read input
    quiet=true setbg "$input"
elif [[ -z "$1" || "$1" = "-h" ]]; then
    echo "usage: chbg <img>"
    exit
else
    setbg "$1"
fi

ln -sf "$SRC" "$HOME/img/desktop"
